import{r as n,N as p,t as m,a as x,j as r,J as j}from"./app-D99SyvRR.js";import{A as b}from"./app-header-floating-CL-WcHKV.js";const E=(o={})=>{const{enabled:s=!0,interval:c=1e4,rolePrefix:a="ips"}=o,[h,f]=n.useState(0),l=n.useRef(new Set),d=n.useRef(null),u=async()=>{try{const t=await p.get(`/${a}/notificaciones/no-leidas`);if(t.data.success){const i=t.data.notificaciones;f(i.length),i.forEach(e=>{l.current.has(e.id)||(l.current.add(e.id),e.tipo==="aceptado"?m.success(e.titulo,{description:e.mensaje,duration:8e3,action:{label:"Ver Pacientes",onClick:()=>x.visit(`/${a}/consulta-pacientes`)}}):e.tipo==="rechazado"&&m.error(e.titulo,{description:e.mensaje,duration:8e3,action:{label:"Ver Pacientes",onClick:()=>x.visit(`/${a}/consulta-pacientes`)}}),v(e.id))})}}catch(t){console.error("Error checking notifications:",t)}},v=async t=>{try{await p.post(`/${a}/notificaciones/${t}/marcar-leida`)}catch(i){console.error("Error marking notification as read:",i)}},g=async()=>{try{await p.post(`/${a}/notificaciones/marcar-todas-leidas`),f(0),l.current.clear()}catch(t){console.error("Error marking all notifications as read:",t)}};return n.useEffect(()=>{if(s)return u(),d.current=setInterval(u,c),()=>{d.current&&clearInterval(d.current)}},[s,c,a]),{notificationsCount:h,checkNotifications:u,markAllAsRead:g}};function R({children:o,title:s="HERMES",breadcrumbs:c=[],user:a}){return E({enabled:a.role==="ips",interval:1e4,rolePrefix:"ips"}),r.jsxs(r.Fragment,{children:[r.jsx(j,{title:s}),r.jsxs("div",{className:"relative min-h-screen bg-slate-50",children:[r.jsx(b,{}),r.jsx("div",{className:"fixed inset-0 bg-slate-50 -z-10"}),r.jsx("main",{className:"relative container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 pt-20 sm:pt-24 pb-6",children:o})]})]})}export{R as A};
