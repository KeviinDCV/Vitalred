import{r as n,N as u,t as f,a as x,j as r,J as g}from"./app-UDAP9ZxG.js";import{A as j}from"./app-header-floating-Cd8IZwRc.js";const E=(o={})=>{const{enabled:s=!0,interval:c=1e4,rolePrefix:a="ips"}=o,[h,m]=n.useState(0),l=n.useRef(new Set),d=n.useRef(null),p=async()=>{try{const t=await u.get(`/${a}/notificaciones/no-leidas`);if(t.data.success){const i=t.data.notificaciones;m(i.length),i.forEach(e=>{l.current.has(e.id)||(l.current.add(e.id),e.tipo==="aceptado"?f.success(e.titulo,{description:e.mensaje,duration:8e3,action:{label:"Ver Pacientes",onClick:()=>x.visit(`/${a}/consulta-pacientes`)}}):e.tipo==="rechazado"&&f.error(e.titulo,{description:e.mensaje,duration:8e3,action:{label:"Ver Pacientes",onClick:()=>x.visit(`/${a}/consulta-pacientes`)}}),v(e.id))})}}catch(t){console.error("Error checking notifications:",t)}},v=async t=>{try{await u.post(`/${a}/notificaciones/${t}/marcar-leida`)}catch(i){console.error("Error marking notification as read:",i)}},b=async()=>{try{await u.post(`/${a}/notificaciones/marcar-todas-leidas`),m(0),l.current.clear()}catch(t){console.error("Error marking all notifications as read:",t)}};return n.useEffect(()=>{if(s)return p(),d.current=setInterval(p,c),()=>{d.current&&clearInterval(d.current)}},[s,c,a]),{notificationsCount:h,checkNotifications:p,markAllAsRead:b}};function R({children:o,title:s="HERMES",breadcrumbs:c=[],user:a}){return E({enabled:a.role==="ips",interval:1e4,rolePrefix:"ips"}),r.jsxs(r.Fragment,{children:[r.jsx(g,{title:s}),r.jsxs("div",{className:"relative min-h-screen min-h-[100dvh] bg-slate-50",children:[r.jsx(j,{}),r.jsx("div",{className:"fixed inset-0 bg-slate-50 -z-10"}),r.jsx("main",{className:`
          relative 
          container mx-auto 
          px-3 sm:px-4 md:px-6 lg:px-8 
          pt-[72px] sm:pt-[80px] md:pt-[88px]
          pb-4 sm:pb-6 md:pb-8
        `,children:o})]})]})}export{R as A};
