import{u as G,r as c,j as e,L as U,B as t,S as X,C as J,a as o,t as n}from"./app-C2iDTuTN.js";import{A as K}from"./app-layout-Ba_vSkmF.js";import{C as Q,c as W}from"./card-Bx9vz5lL.js";import{I as j}from"./input-CPchggRY.js";import{L as m}from"./label-Bk-jda70.js";import{B as b}from"./app-header-floating-CxMkFEgg.js";import{T as Y,a as Z,b as C,c as x,d as ee,e as h}from"./table-CC7lnweu.js";import{S as _,a as S,b as y,c as w,d as A}from"./select-CYkLqY-c.js";import{D as E,a as se,b as T,c as D,d as k,e as O,f as L}from"./dialog-CIh09ZQh.js";import{A as ae}from"./arrow-left-BI5XMkWv.js";import{P as re}from"./plus-GzTX7g8j.js";import{C as te}from"./circle-check-tD_MgkSn.js";import{P as le}from"./pen-DBWz5AzW.js";import{T as ie}from"./trash-2-Y-0hU-JM.js";/* empty css            */import"./index-DFo9P-5L.js";import"./index-CXhS-UtD.js";import"./user-0Jdvfuuw.js";import"./app-logo-icon-D1cblqZD.js";import"./index-CJBLZvEQ.js";import"./check-CAFe9VCk.js";import"./x-CTPiZeHd.js";const f=[{value:"eps",label:"EPS"},{value:"arl",label:"ARL"},{value:"soat",label:"SOAT"},{value:"adres",label:"ADRES"},{value:"particular",label:"Particular"},{value:"secretaria_salud",label:"Secretaría de Salud"}];function Te(){const{aseguradores:a,filters:P}=G().props,[u,$]=c.useState(P.search||""),[z,p]=c.useState(!1),[B,d]=c.useState(!1),[v,N]=c.useState(null),[r,l]=c.useState({tipo:"eps",nombre:""}),F=s=>{$(s),o.get("/admin/configuracion/aseguradores",{search:s},{preserveState:!0})},I=s=>{s.preventDefault(),o.post("/admin/configuracion/aseguradores",r,{onSuccess:()=>{p(!1),l({tipo:"eps",nombre:""}),n.success("Asegurador creado exitosamente")},onError:i=>{Object.values(i).forEach(g=>n.error(g))}})},M=s=>{s.preventDefault(),v&&o.put(`/admin/configuracion/aseguradores/${v.id}`,r,{onSuccess:()=>{d(!1),N(null),l({tipo:"eps",nombre:""}),n.success("Asegurador actualizado exitosamente")},onError:i=>{Object.values(i).forEach(g=>n.error(g))}})},R=s=>{o.patch(`/admin/configuracion/aseguradores/${s}/toggle`,{},{onSuccess:()=>n.success("Estado actualizado")})},q=(s,i)=>{confirm(`¿Está seguro de eliminar el asegurador ${i}?`)&&o.delete(`/admin/configuracion/aseguradores/${s}`,{onSuccess:()=>n.success("Asegurador eliminado")})},H=s=>{N(s),l({tipo:s.tipo,nombre:s.nombre}),d(!0)},V=s=>f.find(i=>i.value===s)?.label||s.toUpperCase();return e.jsx(K,{children:e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{href:"/admin/configuracion",className:"text-slate-600",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Aseguradores"}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:[a.total," aseguradores del sistema"]})]})]}),e.jsxs(E,{open:z,onOpenChange:p,children:[e.jsx(se,{asChild:!0,children:e.jsxs(t,{className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Agregar"]})}),e.jsx(T,{className:"max-w-md",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs(D,{children:[e.jsx(k,{children:"Nuevo Asegurador"}),e.jsx(O,{children:"Agregue un nuevo asegurador al sistema"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"tipo",children:"Tipo *"}),e.jsxs(_,{value:r.tipo,onValueChange:s=>l({...r,tipo:s}),children:[e.jsx(S,{children:e.jsx(y,{})}),e.jsx(w,{children:f.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"nombre",children:"Nombre *"}),e.jsx(j,{id:"nombre",value:r.nombre,onChange:s=>l({...r,nombre:s.target.value}),placeholder:"Nombre del asegurador",required:!0})]})]}),e.jsxs(L,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Guardar"})]})]})})]})]}),e.jsx(Q,{className:"bg-gradient-to-b from-white to-slate-50/20 border-0 shadow-[0_2px_4px_rgba(0,0,0,0.06),0_8px_20px_rgba(0,0,0,0.1),inset_0_1px_0_rgba(255,255,255,1)]",children:e.jsxs(W,{className:"space-y-4 p-4 sm:p-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(j,{type:"text",placeholder:"Buscar por nombre o tipo...",className:"pl-10",value:u,onChange:s=>F(s.target.value)})]})}),a.data.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-b from-slate-50 to-slate-100/50 border-0 overflow-x-auto shadow-[inset_0_1px_2px_rgba(0,0,0,0.04)]",children:e.jsxs(Y,{children:[e.jsx(Z,{className:"bg-slate-100 border-0",children:e.jsxs(C,{className:"border-0 hover:bg-slate-100",children:[e.jsx(x,{children:"Tipo"}),e.jsx(x,{children:"Nombre"}),e.jsx(x,{className:"text-center",children:"Estado"}),e.jsx(x,{className:"text-center",children:"Acciones"})]})}),e.jsx(ee,{children:a.data.map(s=>e.jsxs(C,{className:"bg-gradient-to-b from-white to-white border-0 border-b border-slate-100 last:border-b-0 hover:from-slate-50 hover:to-white hover:shadow-[0_1px_2px_rgba(0,0,0,0.04)] transition-all duration-200",children:[e.jsx(h,{children:e.jsx(b,{variant:"secondary",children:V(s.tipo)})}),e.jsx(h,{children:e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.nombre})}),e.jsx(h,{className:"text-center",children:e.jsx("button",{onClick:()=>R(s.id),className:"inline-flex items-center",children:s.activo?e.jsxs(b,{className:"bg-green-100 text-green-700 border-green-200",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(b,{variant:"outline",className:"bg-gray-50",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})}),e.jsx(h,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(t,{size:"sm",variant:"ghost",onClick:()=>H(s),className:"h-8 w-8 p-0",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"ghost",onClick:()=>q(s.id,s.nombre),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ie,{className:"h-4 w-4"})})]})})]},s.id))})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Página ",a.current_page," de ",a.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",disabled:a.current_page===1,onClick:()=>o.get(`/admin/configuracion/aseguradores?page=${a.current_page-1}&search=${u}`),children:"Anterior"}),e.jsx(t,{size:"sm",variant:"outline",disabled:a.current_page===a.last_page,onClick:()=>o.get(`/admin/configuracion/aseguradores?page=${a.current_page+1}&search=${u}`),children:"Siguiente"})]})]})]}):e.jsx("div",{className:"text-center p-8 text-slate-500",children:"No se encontraron resultados"})]})}),e.jsx(E,{open:B,onOpenChange:d,children:e.jsx(T,{className:"max-w-md",children:e.jsxs("form",{onSubmit:M,children:[e.jsxs(D,{children:[e.jsx(k,{children:"Editar Asegurador"}),e.jsx(O,{children:"Modifique los datos del asegurador"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"edit_tipo",children:"Tipo *"}),e.jsxs(_,{value:r.tipo,onValueChange:s=>l({...r,tipo:s}),children:[e.jsx(S,{children:e.jsx(y,{})}),e.jsx(w,{children:f.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"edit_nombre",children:"Nombre *"}),e.jsx(j,{id:"edit_nombre",value:r.nombre,onChange:s=>l({...r,nombre:s.target.value}),required:!0})]})]}),e.jsxs(L,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Actualizar"})]})]})})})]})})}export{Te as default};
