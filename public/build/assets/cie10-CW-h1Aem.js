import{u as B,r as l,j as e,L as F,B as r,S as q,C as P,a as c,t as o}from"./app-D99SyvRR.js";import{A as H}from"./app-layout-OPwkLiXp.js";import{C as R,c as U}from"./card-C4eruR7i.js";import{I as d}from"./input-BVJURA-9.js";import{L as x}from"./label-Ckf2DMGS.js";import{B as v}from"./app-header-floating-CL-WcHKV.js";import{T as G,a as X,b as N,c as h,d as J,e as g}from"./table-DRSZJk0l.js";import{D as C,a as K,b as _,c as y,d as w,e as E,f as D}from"./dialog-nm0EGwo3.js";import{A as Q}from"./arrow-left-B6goLLZ7.js";import{P as V}from"./plus-w4CSal2B.js";import{C as W}from"./circle-check-CweT3T_j.js";import{P as Y}from"./pen-7sK1aVKp.js";import{T as Z}from"./trash-2-CcIQxgVn.js";/* empty css            */import"./index-7FwNBKjq.js";import"./index-CF2syoQW.js";import"./user-BFnnBjxc.js";import"./app-logo-icon-CfVo17qO.js";import"./x-BktVeUEg.js";function be(){const{codigos:a,filters:S}=B().props,[p,A]=l.useState(S.search||""),[T,u]=l.useState(!1),[L,m]=l.useState(!1),[f,b]=l.useState(null),[i,t]=l.useState({codigo:"",descripcion:""}),k=s=>{A(s),c.get("/admin/configuracion/cie10",{search:s},{preserveState:!0})},I=s=>{s.preventDefault(),c.post("/admin/configuracion/cie10",i,{onSuccess:()=>{u(!1),t({codigo:"",descripcion:""}),o.success("Código creado exitosamente")},onError:n=>{Object.values(n).forEach(j=>o.error(j))}})},O=s=>{s.preventDefault(),f&&c.put(`/admin/configuracion/cie10/${f.id}`,i,{onSuccess:()=>{m(!1),b(null),t({codigo:"",descripcion:""}),o.success("Código actualizado exitosamente")},onError:n=>{Object.values(n).forEach(j=>o.error(j))}})},$=s=>{c.patch(`/admin/configuracion/cie10/${s}/toggle`,{},{onSuccess:()=>o.success("Estado actualizado")})},z=(s,n)=>{confirm(`¿Está seguro de eliminar el código ${n}?`)&&c.delete(`/admin/configuracion/cie10/${s}`,{onSuccess:()=>o.success("Código eliminado")})},M=s=>{b(s),t({codigo:s.codigo,descripcion:s.descripcion}),m(!0)};return e.jsx(H,{children:e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{href:"/admin/configuracion",className:"text-slate-600",children:e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Códigos CIE-10"}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:[a.total," diagnósticos médicos"]})]})]}),e.jsxs(C,{open:T,onOpenChange:u,children:[e.jsx(K,{asChild:!0,children:e.jsxs(r,{className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Agregar"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:I,children:[e.jsxs(y,{children:[e.jsx(w,{children:"Nuevo Código CIE-10"}),e.jsx(E,{children:"Agregue un nuevo código de diagnóstico médico"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"codigo",children:"Código *"}),e.jsx(d,{id:"codigo",value:i.codigo,onChange:s=>t({...i,codigo:s.target.value.toUpperCase()}),placeholder:"Ej: A001",maxLength:10,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"descripcion",children:"Descripción *"}),e.jsx(d,{id:"descripcion",value:i.descripcion,onChange:s=>t({...i,descripcion:s.target.value}),placeholder:"Descripción del diagnóstico",maxLength:500,required:!0})]})]}),e.jsxs(D,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(r,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Guardar"})]})]})})]})]}),e.jsx(R,{className:"bg-gradient-to-b from-white to-slate-50/20 border-0 shadow-[0_2px_4px_rgba(0,0,0,0.06),0_8px_20px_rgba(0,0,0,0.1),inset_0_1px_0_rgba(255,255,255,1)]",children:e.jsxs(U,{className:"space-y-4 p-4 sm:p-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(d,{type:"text",placeholder:"Buscar por código o descripción...",className:"pl-10",value:p,onChange:s=>k(s.target.value)})]})}),a.data.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-b from-slate-50 to-slate-100/50 border-0 overflow-x-auto shadow-[inset_0_1px_2px_rgba(0,0,0,0.04)]",children:e.jsxs(G,{children:[e.jsx(X,{className:"bg-slate-100 border-0",children:e.jsxs(N,{className:"border-0 hover:bg-slate-100",children:[e.jsx(h,{children:"Código"}),e.jsx(h,{children:"Descripción"}),e.jsx(h,{className:"text-center",children:"Estado"}),e.jsx(h,{className:"text-center",children:"Acciones"})]})}),e.jsx(J,{children:a.data.map(s=>e.jsxs(N,{className:"bg-gradient-to-b from-white to-white border-0 border-b border-slate-100 last:border-b-0 hover:from-slate-50 hover:to-white hover:shadow-[0_1px_2px_rgba(0,0,0,0.04)] transition-all duration-200",children:[e.jsx(g,{children:e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:s.codigo})}),e.jsx(g,{children:e.jsx("span",{className:"text-sm text-slate-700",children:s.descripcion})}),e.jsx(g,{className:"text-center",children:e.jsx("button",{onClick:()=>$(s.id),className:"inline-flex items-center",children:s.activo?e.jsxs(v,{className:"bg-green-100 text-green-700 border-green-200",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(v,{variant:"outline",className:"bg-gray-50",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})}),e.jsx(g,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>M(s),className:"h-8 w-8 p-0",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>z(s.id,s.codigo),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Z,{className:"h-4 w-4"})})]})})]},s.id))})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Mostrando ",a.from," a ",a.to," de ",a.total," registros"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"outline",disabled:a.current_page===1,onClick:()=>c.get(`/admin/configuracion/cie10?page=${a.current_page-1}&search=${p}`),children:"Anterior"}),e.jsx(r,{size:"sm",variant:"outline",disabled:a.current_page===a.last_page,onClick:()=>c.get(`/admin/configuracion/cie10?page=${a.current_page+1}&search=${p}`),children:"Siguiente"})]})]})]}):e.jsx("div",{className:"text-center p-8 text-slate-500",children:"No se encontraron resultados"})]})}),e.jsx(C,{open:L,onOpenChange:m,children:e.jsx(_,{children:e.jsxs("form",{onSubmit:O,children:[e.jsxs(y,{children:[e.jsx(w,{children:"Editar Código CIE-10"}),e.jsx(E,{children:"Modifique los datos del código de diagnóstico"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"edit_codigo",children:"Código *"}),e.jsx(d,{id:"edit_codigo",value:i.codigo,onChange:s=>t({...i,codigo:s.target.value.toUpperCase()}),maxLength:10,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"edit_descripcion",children:"Descripción *"}),e.jsx(d,{id:"edit_descripcion",value:i.descripcion,onChange:s=>t({...i,descripcion:s.target.value}),maxLength:500,required:!0})]})]}),e.jsxs(D,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),e.jsx(r,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Actualizar"})]})]})})})]})})}export{be as default};
