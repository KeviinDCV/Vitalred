import{r as f,j as e,J as w,S as y,B as d,a as n}from"./app-kB0rY2ZU.js";import{A as B}from"./app-layout-Do4cvd8_.js";import{I as D}from"./input-hUDAkEv0.js";import{C as p,a as v,b,c as g}from"./card-C8hkPRSH.js";import{B as o}from"./app-header-floating-DQVN2bTT.js";import{T as k,a as M,b as N,c as i,d as P,e as t}from"./table-DsO3Xxn1.js";import{D as A}from"./download-BuC2pIFl.js";import{C as E}from"./chevron-left-BHNlPMb1.js";import{C as H}from"./chevron-right-p1lZTVPr.js";/* empty css            */import"./index-BmiV45ly.js";import"./index-iocjxivu.js";import"./user-DKZnZqop.js";import"./app-logo-icon-CvRqHJxV.js";const R=[{title:"Tablero",href:"/dashboard"}];function Y({registros:s,search:x}){const[m,u]=f.useState(x||""),[h,c]=f.useState(!1),_=a=>new Date(a).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}),C=a=>{const l={triage_1:"destructive",triage_2:"destructive",triage_3:"default",triage_4:"secondary",triage_5:"outline"},r={triage_1:"Crítico",triage_2:"Alto",triage_3:"Medio",triage_4:"Bajo",triage_5:"Mínimo"};return e.jsx(o,{variant:l[a]||"outline",children:r[a]||"Sin clasificar"})},j=()=>{c(!0),n.get("/dashboard",{search:m},{preserveState:!0,onFinish:()=>c(!1)})},S=()=>{u(""),c(!0),n.get("/dashboard",{},{preserveState:!0,onFinish:()=>c(!1)})},T=a=>{if(a.historia_clinica_path){const l=route("admin.descargar-historia",a.id),r=document.createElement("a");r.href=l,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)}};return e.jsxs(B,{breadcrumbs:R,children:[e.jsx(w,{title:"Tablero - Registros Médicos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Tablero de Administración"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Supervisa todos los registros médicos del sistema"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(o,{variant:"outline",className:"text-sm",children:[s.total," registros totales"]})})]}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Buscar Registros Médicos"]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{placeholder:"Buscar por nombre, documento, diagnóstico...",value:m,onChange:a=>u(a.target.value),onKeyPress:a=>a.key==="Enter"&&j(),className:"flex-1"}),e.jsx(d,{onClick:j,disabled:h,children:h?"Buscando...":"Buscar"}),(m||x)&&e.jsx(d,{variant:"outline",onClick:S,disabled:h,children:"Limpiar"})]})})]}),e.jsxs(p,{children:[e.jsxs(v,{children:[e.jsx(b,{children:"Registros Médicos"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.total," registros encontrados"]})]}),e.jsxs(g,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(k,{children:[e.jsx(M,{children:e.jsxs(N,{children:[e.jsx(i,{children:"ID"}),e.jsx(i,{children:"Nombre"}),e.jsx(i,{children:"Médico"}),e.jsx(i,{children:"Fecha solicitud"}),e.jsx(i,{children:"EPS"}),e.jsx(i,{children:"Edad"}),e.jsx(i,{children:"Tipo de Paciente"}),e.jsx(i,{children:"Prioridad"}),e.jsx(i,{children:"Descargar Historia"})]})}),e.jsx(P,{children:s.data.map(a=>e.jsxs(N,{children:[e.jsx(t,{children:e.jsxs("div",{className:"font-mono text-sm font-medium",children:["#",a.id]})}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[a.nombre," ",a.apellidos]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.numero_identificacion})]})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm",children:a.user?.name||"N/A"})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm",children:_(a.created_at)})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm",children:a.asegurador})}),e.jsx(t,{children:e.jsxs(o,{variant:"outline",children:[a.edad," años"]})}),e.jsx(t,{children:e.jsx(o,{variant:"secondary",children:a.tipo_paciente})}),e.jsx(t,{children:C(a.clasificacion_triage)}),e.jsx(t,{children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>T(a),disabled:!a.historia_clinica_path,children:e.jsx(A,{className:"h-4 w-4"})})})]},a.id))})]})}),s.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",s.from||0," a ",s.to||0," de ",s.total," registros"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n.get(s.links.find(a=>a.label==="&laquo; Previous")?.url||"#"),disabled:s.current_page===1,children:[e.jsx(E,{className:"h-4 w-4"}),"Anterior"]}),s.links.filter(a=>a.label!=="&laquo; Previous"&&a.label!=="Next &raquo;").slice(0,5).map((a,l)=>e.jsx(d,{variant:a.active?"default":"outline",size:"sm",onClick:()=>a.url&&n.get(a.url),disabled:!a.url,children:a.label},l)),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n.get(s.links.find(a=>a.label==="Next &raquo;")?.url||"#"),disabled:s.current_page===s.last_page,children:["Siguiente",e.jsx(H,{className:"h-4 w-4"})]})]})]})]})]})]})]})}export{Y as default};
