import{u as V,r as m,j as e,L as R,B as n,S as G,C as U,a as l,t as c}from"./app-CnyeNHUU.js";import{A as X}from"./app-layout-C92rXIyv.js";import{C as J,c as K}from"./card-ETEdsKqW.js";import{I as o}from"./input-DLv1FQwY.js";import{L as r}from"./label-Doz5xWgs.js";import{B as v}from"./app-header-floating-orb7mFCy.js";import{T as Q,a as W,b as _,c as h,d as Y,e as x}from"./table-7iVP7E-L.js";import{S as C,a as y,b as S,c as w,d as u}from"./select-Hg7h2vcx.js";import{D as I,a as Z,b as D,c as E,d as T,e as F,f as P}from"./dialog-hmW3nRAg.js";import{A as ee}from"./arrow-left-CfG3zgKu.js";import{P as ae}from"./plus-4Q-4PyqX.js";import{C as se}from"./circle-check-HjOJeEXL.js";import{P as ie}from"./pen-Cuf9b8RA.js";import{T as te}from"./trash-2-BU3d9lBB.js";/* empty css            */import"./index-DsHheLMd.js";import"./index-DvsujJh_.js";import"./user-Cinx_f59.js";import"./app-logo-icon-BU_HRZCK.js";import"./index-Ca-otmNe.js";import"./check-8EvnRfj5.js";import"./x-Cfn-JGmy.js";function Ie(){const{instituciones:t,filters:A}=V().props,[j,M]=m.useState(A.search||""),[k,g]=m.useState(!1),[O,p]=m.useState(!1),[f,N]=m.useState(null),[s,i]=m.useState({tipo:"nacional",nombre:"",codigo_habilitacion:"",departamento:"",municipio:""}),$=a=>{M(a),l.get("/admin/configuracion/instituciones",{search:a},{preserveState:!0})},z=a=>{a.preventDefault(),l.post("/admin/configuracion/instituciones",s,{onSuccess:()=>{g(!1),i({tipo:"nacional",nombre:"",codigo_habilitacion:"",departamento:"",municipio:""}),c.success("Institución creada exitosamente")},onError:d=>{Object.values(d).forEach(b=>c.error(b))}})},B=a=>{a.preventDefault(),f&&l.put(`/admin/configuracion/instituciones/${f.id}`,s,{onSuccess:()=>{p(!1),N(null),i({tipo:"nacional",nombre:"",codigo_habilitacion:"",departamento:"",municipio:""}),c.success("Institución actualizada exitosamente")},onError:d=>{Object.values(d).forEach(b=>c.error(b))}})},L=a=>{l.patch(`/admin/configuracion/instituciones/${a}/toggle`,{},{onSuccess:()=>c.success("Estado actualizado")})},H=(a,d)=>{confirm(`¿Está seguro de eliminar la institución ${d}?`)&&l.delete(`/admin/configuracion/instituciones/${a}`,{onSuccess:()=>c.success("Institución eliminada")})},q=a=>{N(a),i({tipo:a.tipo,nombre:a.nombre,codigo_habilitacion:a.codigo_habilitacion||"",departamento:a.departamento||"",municipio:a.municipio||""}),p(!0)};return e.jsx(X,{children:e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{href:"/admin/configuracion",className:"text-slate-600",children:e.jsx(ee,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Instituciones"}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:[t.total," instituciones prestadoras de salud"]})]})]}),e.jsxs(I,{open:k,onOpenChange:g,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(n,{className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Agregar"]})}),e.jsx(D,{className:"max-w-md",children:e.jsxs("form",{onSubmit:z,children:[e.jsxs(E,{children:[e.jsx(T,{children:"Nueva Institución"}),e.jsx(F,{children:"Agregue una nueva institución prestadora de salud"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"tipo",children:"Tipo *"}),e.jsxs(C,{value:s.tipo,onValueChange:a=>i({...s,tipo:a}),children:[e.jsx(y,{children:e.jsx(S,{})}),e.jsxs(w,{children:[e.jsx(u,{value:"nacional",children:"IPS Nacional"}),e.jsx(u,{value:"policia",children:"IPS Policía"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"nombre",children:"Nombre *"}),e.jsx(o,{id:"nombre",value:s.nombre,onChange:a=>i({...s,nombre:a.target.value}),placeholder:"Nombre de la institución",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"codigo_habilitacion",children:"Código Habilitación"}),e.jsx(o,{id:"codigo_habilitacion",value:s.codigo_habilitacion,onChange:a=>i({...s,codigo_habilitacion:a.target.value}),placeholder:"Código de habilitación"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"departamento",children:"Departamento"}),e.jsx(o,{id:"departamento",value:s.departamento,onChange:a=>i({...s,departamento:a.target.value}),placeholder:"Departamento"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"municipio",children:"Municipio"}),e.jsx(o,{id:"municipio",value:s.municipio,onChange:a=>i({...s,municipio:a.target.value}),placeholder:"Municipio"})]})]}),e.jsxs(P,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Guardar"})]})]})})]})]}),e.jsx(J,{className:"bg-gradient-to-b from-white to-slate-50/20 border-0 shadow-[0_2px_4px_rgba(0,0,0,0.06),0_8px_20px_rgba(0,0,0,0.1),inset_0_1px_0_rgba(255,255,255,1)]",children:e.jsxs(K,{className:"space-y-4 p-4 sm:p-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(o,{type:"text",placeholder:"Buscar por nombre, departamento o municipio...",className:"pl-10",value:j,onChange:a=>$(a.target.value)})]})}),t.data.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-b from-slate-50 to-slate-100/50 border-0 overflow-x-auto shadow-[inset_0_1px_2px_rgba(0,0,0,0.04)]",children:e.jsxs(Q,{children:[e.jsx(W,{className:"bg-slate-100 border-0",children:e.jsxs(_,{className:"border-0 hover:bg-slate-100",children:[e.jsx(h,{children:"Tipo"}),e.jsx(h,{children:"Nombre"}),e.jsx(h,{children:"Ubicación"}),e.jsx(h,{className:"text-center",children:"Estado"}),e.jsx(h,{className:"text-center",children:"Acciones"})]})}),e.jsx(Y,{children:t.data.map(a=>e.jsxs(_,{className:"bg-gradient-to-b from-white to-white border-0 border-b border-slate-100 last:border-b-0 hover:from-slate-50 hover:to-white hover:shadow-[0_1px_2px_rgba(0,0,0,0.04)] transition-all duration-200",children:[e.jsx(x,{children:e.jsx(v,{variant:"secondary",children:a.tipo==="nacional"?"Nacional":"Policía"})}),e.jsx(x,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:a.nombre}),a.codigo_habilitacion&&e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:a.codigo_habilitacion})]})}),e.jsx(x,{children:e.jsxs("div",{className:"text-sm text-slate-700",children:[a.departamento&&e.jsx("div",{children:a.departamento}),a.municipio&&e.jsx("div",{className:"text-muted-foreground",children:a.municipio}),!a.departamento&&!a.municipio&&e.jsx("span",{className:"text-slate-400",children:"-"})]})}),e.jsx(x,{className:"text-center",children:e.jsx("button",{onClick:()=>L(a.id),className:"inline-flex items-center",children:a.activo?e.jsxs(v,{className:"bg-green-100 text-green-700 border-green-200",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"Activo"]}):e.jsxs(v,{variant:"outline",className:"bg-gray-50",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Inactivo"]})})}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>q(a),className:"h-8 w-8 p-0",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>H(a.id,a.nombre),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(te,{className:"h-4 w-4"})})]})})]},a.id))})]})}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Mostrando ",t.from," a ",t.to," de ",t.total," registros"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"outline",disabled:t.current_page===1,onClick:()=>l.get(`/admin/configuracion/instituciones?page=${t.current_page-1}&search=${j}`),children:"Anterior"}),e.jsx(n,{size:"sm",variant:"outline",disabled:t.current_page===t.last_page,onClick:()=>l.get(`/admin/configuracion/instituciones?page=${t.current_page+1}&search=${j}`),children:"Siguiente"})]})]})]}):e.jsx("div",{className:"text-center p-8 text-slate-500",children:"No se encontraron resultados"})]})}),e.jsx(I,{open:O,onOpenChange:p,children:e.jsx(D,{className:"max-w-md",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs(E,{children:[e.jsx(T,{children:"Editar Institución"}),e.jsx(F,{children:"Modifique los datos de la institución"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_tipo",children:"Tipo *"}),e.jsxs(C,{value:s.tipo,onValueChange:a=>i({...s,tipo:a}),children:[e.jsx(y,{children:e.jsx(S,{})}),e.jsxs(w,{children:[e.jsx(u,{value:"nacional",children:"IPS Nacional"}),e.jsx(u,{value:"policia",children:"IPS Policía"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_nombre",children:"Nombre *"}),e.jsx(o,{id:"edit_nombre",value:s.nombre,onChange:a=>i({...s,nombre:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_codigo_habilitacion",children:"Código Habilitación"}),e.jsx(o,{id:"edit_codigo_habilitacion",value:s.codigo_habilitacion,onChange:a=>i({...s,codigo_habilitacion:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_departamento",children:"Departamento"}),e.jsx(o,{id:"edit_departamento",value:s.departamento,onChange:a=>i({...s,departamento:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_municipio",children:"Municipio"}),e.jsx(o,{id:"edit_municipio",value:s.municipio,onChange:a=>i({...s,municipio:a.target.value})})]})]}),e.jsxs(P,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",className:"bg-gradient-to-b from-[#042077] to-[#031852]",children:"Actualizar"})]})]})})})]})})}export{Ie as default};
