import{c as ge,u as Ge,r as t,v as ce,t as oe,j as e,a as p,B as d,S as Ve,A as $e,w as Je,x as Xe,y as Ke,z as Qe,E as We,G as Ye,H as Ze,I as es,C as ss}from"./app-PZnyk1wt.js";import{C as f,a as de,b as me,d as xe,c as he}from"./card-CyItu73q.js";import{T as pe,a as ue,b as v,c as l,d as je,e as r}from"./table-CnjPTz1b.js";import{B as H}from"./app-header-floating-z-VX2Nba.js";import{D as G,a as as,b as V,c as $,d as J,e as X,f as K}from"./dialog-Cv_OT2mk.js";import{I as n}from"./input-DnGPTIjV.js";import{L as i}from"./label-l1nxLGAW.js";import{S as y,a as S,b as k,c as E,d as c}from"./select-Cmh3VDq9.js";import{C as ts}from"./checkbox-B5GDo2OH.js";import{I as o}from"./input-error-D-ZT2i1Z.js";import{A as rs}from"./app-layout-inertia-B7-CbxuW.js";import{T as ls}from"./textarea-CxJKqatA.js";import{P as is}from"./plus-tOXfGuW4.js";import{S as ns}from"./square-pen-vZjxq5Vo.js";import{T as cs}from"./trash-2-BYjdbHiS.js";import{C as os}from"./circle-check-big-z38ttHuN.js";/* empty css            */import"./index-BGVJRuT5.js";import"./index-B7eq0_Mq.js";import"./user-DF6Ef5YX.js";import"./app-logo-icon-g8V_8C5E.js";import"./x-DHMhdK3m.js";import"./index-QaqjAwiJ.js";import"./check-DV8n1a5I.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],b=ge("UserCheck",ds);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],xs=ge("UserX",ms),hs=[{title:"Dashboard",href:"/dashboard"},{title:"Gestión de Usuarios",href:"/admin/usuarios"}];function Ls({usuarios:I,stats:N,eps:Q=[],nits:fe=[],solicitudes:D=[],filtroEstado:W=""}){const{auth:ve,flash:w}=Ge().props,[_,Y]=t.useState(W!==""?"solicitudes":"usuarios"),[be,U]=t.useState(!1),[Ne,T]=t.useState(!1),[we,z]=t.useState(!1),[L,Z]=t.useState(null),[u,ee]=t.useState(null),[j,Ce]=t.useState(""),[g,ye]=t.useState(W),[se,M]=t.useState(""),{data:h,setData:a,post:Se,processing:ae,errors:m,reset:ke}=ce({name:"",email:"",password:"",password_confirmation:"",role:"medico",is_active:!0,eps_id:null,eps_nombre:"",nit:"",nombre_responsable:"",cargo_responsable:"",telefono:""}),[q,Ee]=t.useState(""),[De,te]=t.useState(""),[O,_e]=t.useState(""),[re,A]=t.useState(""),[le,Te]=t.useState(""),[ie,ze]=t.useState(""),{data:P,setData:C,put:Ae,processing:ne,errors:B,reset:Pe}=ce({name:"",email:"",role:"medico",is_active:!0}),R=t.useMemo(()=>j?I.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||s.email.toLowerCase().includes(j.toLowerCase())||s.role.toLowerCase().includes(j.toLowerCase())):I,[I,j]);t.useEffect(()=>{w?.success&&oe.success(w.success),w?.error&&oe.error(w.error)},[w]);const Re=s=>{s.preventDefault(),Se(route("admin.usuarios.store"),{onSuccess:()=>{ke(),U(!1)}})},Fe=s=>{s.preventDefault(),L&&Ae(route("admin.usuarios.update",L.id),{onSuccess:()=>{Pe(),T(!1),Z(null)}})},Ie=s=>{Z(s),C({name:s.name,email:s.email,role:s.role,is_active:s.is_active}),T(!0)},Ue=s=>{p.patch(route("admin.usuarios.toggle-status",s.id))},Le=s=>{p.delete(route("admin.usuarios.destroy",s.id))},F=t.useMemo(()=>{let s=D;return g&&(s=s.filter(x=>x.estado===g)),s},[D,g]),Me=s=>{p.post(route("admin.usuarios.solicitudes.aprobar",s.id),{},{onSuccess:()=>{p.reload()}})},qe=s=>{ee(s),M(""),z(!0)},Oe=()=>{u&&p.post(route("admin.usuarios.solicitudes.rechazar",u.id),{observaciones:se},{onSuccess:()=>{z(!1),ee(null),M(""),p.reload()}})},Be=s=>{const x=s==="todas"?"":s;ye(x),p.get(route("admin.usuarios.solicitudes"),{estado:x},{preserveState:!0})};return e.jsx(rs,{title:"Gestión de Usuarios - HERMES",breadcrumbs:hs,user:ve.user,children:e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-5 md:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Gestión de Usuarios"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Administra los usuarios del sistema"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>Y("usuarios"),className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors ${_==="usuarios"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Usuarios"}),e.jsxs("button",{onClick:()=>{Y("solicitudes"),p.get(route("admin.usuarios.solicitudes"),{},{preserveState:!0})},className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors relative ${_==="solicitudes"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Solicitudes",D.filter(s=>s.estado==="pendiente").length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] sm:text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center",children:D.filter(s=>s.estado==="pendiente").length})]})]}),_==="usuarios"&&e.jsxs(G,{open:be,onOpenChange:U,children:[e.jsx(as,{asChild:!0,children:e.jsxs(d,{className:"bg-primary hover:bg-primary/90",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})}),e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsx(J,{children:"Crear Nuevo Usuario"}),e.jsx(X,{children:"Completa la información para crear un nuevo usuario en el sistema."})]}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-name",children:"Nombre Completo"}),e.jsx(n,{id:"create-name",value:h.name,onChange:s=>a("name",s.target.value),placeholder:"Ej: Dr. Juan Pérez",required:!0}),e.jsx(o,{message:m.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-email",children:"Correo Electrónico"}),e.jsx(n,{id:"create-email",type:"email",value:h.email,onChange:s=>a("email",s.target.value),placeholder:"correo@ejemplo.com",required:!0}),e.jsx(o,{message:m.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-role",children:"Rol"}),e.jsxs(y,{value:h.role,onValueChange:s=>a("role",s),children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Selecciona un rol"})}),e.jsxs(E,{children:[e.jsx(c,{value:"medico",children:"Médico"}),e.jsx(c,{value:"administrador",children:"Administrador"}),e.jsx(c,{value:"ips",children:"EPS"})]})]}),e.jsx(o,{message:m.role})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-password",children:"Contraseña"}),e.jsx(n,{id:"create-password",type:"password",value:h.password,onChange:s=>a("password",s.target.value),placeholder:"Mínimo 8 caracteres",required:!0}),e.jsx(o,{message:m.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-password-confirmation",children:"Confirmar Contraseña"}),e.jsx(n,{id:"create-password-confirmation",type:"password",value:h.password_confirmation,onChange:s=>a("password_confirmation",s.target.value),placeholder:"Repite la contraseña",required:!0}),e.jsx(o,{message:m.password_confirmation})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(i,{htmlFor:"create-eps",children:["EPS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(y,{value:q,onValueChange:s=>{if(Ee(s),s==="manual")a("eps_id",null),a("eps_nombre",""),A(""),a("nit","");else{const x=Q.find(He=>He.id===parseInt(s));x&&(a("eps_id",null),a("eps_nombre",x.nombre),te(x.nombre),x.nit&&(A(x.nit),a("nit",x.nit)))}},children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Seleccione una EPS o escriba manualmente"})}),e.jsxs(E,{className:"max-h-60",children:[e.jsx("div",{className:"px-2 pb-2 sticky top-0 bg-white border-b z-10",children:e.jsx(n,{type:"text",placeholder:"Buscar EPS...",value:le,onChange:s=>Te(s.target.value),className:"h-9 text-sm",onClick:s=>s.stopPropagation()})}),e.jsx(c,{value:"manual",className:"font-medium text-primary",children:"+ Escribir EPS manualmente"}),Q.filter(s=>s.nombre.toLowerCase().includes(le.toLowerCase())).map(s=>e.jsx(c,{value:s.id.toString(),children:s.nombre},s.id))]})]}),q==="manual"&&e.jsx(n,{id:"create-eps-nombre",value:De,onChange:s=>{te(s.target.value),a("eps_nombre",s.target.value)},placeholder:"Nombre de la EPS",required:q==="manual"}),e.jsx(o,{message:m.eps_id||m.eps_nombre})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(i,{htmlFor:"create-nit",children:["NIT ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(y,{value:O,onValueChange:s=>{_e(s),s==="manual"?a("nit",""):(a("nit",s),A(s))},children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Seleccione un NIT o escriba manualmente"})}),e.jsxs(E,{className:"max-h-60",children:[e.jsx("div",{className:"px-2 pb-2 sticky top-0 bg-white border-b z-10",children:e.jsx(n,{type:"text",placeholder:"Buscar NIT...",value:ie,onChange:s=>ze(s.target.value),className:"h-9 text-sm",onClick:s=>s.stopPropagation()})}),e.jsx(c,{value:"manual",className:"font-medium text-primary",children:"+ Escribir NIT manualmente"}),fe.filter(s=>s.toLowerCase().includes(ie.toLowerCase())).map(s=>e.jsx(c,{value:s,children:s},s))]})]}),(O==="manual"||!O&&re)&&e.jsx(n,{id:"create-nit",value:re,onChange:s=>{A(s.target.value),a("nit",s.target.value)},placeholder:"Número de Identificación Tributaria",required:!0}),e.jsx(o,{message:m.nit})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(i,{htmlFor:"create-nombre-responsable",children:["Nombre del Responsable ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"create-nombre-responsable",value:h.nombre_responsable,onChange:s=>a("nombre_responsable",s.target.value),placeholder:"Ej: Dr. Juan Pérez",required:!0}),e.jsx(o,{message:m.nombre_responsable})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(i,{htmlFor:"create-cargo-responsable",children:["Cargo del Responsable ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"create-cargo-responsable",value:h.cargo_responsable,onChange:s=>a("cargo_responsable",s.target.value),placeholder:"Ej: Director Médico",required:!0}),e.jsx(o,{message:m.cargo_responsable})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(i,{htmlFor:"create-telefono",children:["Teléfono/Contacto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"create-telefono",type:"tel",value:h.telefono,onChange:s=>a("telefono",s.target.value),placeholder:"Ej: 3001234567",required:!0}),e.jsx(o,{message:m.telefono})]})]}),e.jsxs(K,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",disabled:ae,children:ae?"Creando...":"Crear Usuario"})]})]})]})]})]})]}),_==="usuarios"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-4 lg:grid-cols-[240px_1fr] xl:grid-cols-[280px_1fr]",children:[e.jsxs("div",{className:"flex lg:flex-col gap-2 sm:gap-3 overflow-x-auto lg:overflow-visible pb-2 lg:pb-0 -mx-3 px-3 sm:-mx-4 sm:px-4 lg:mx-0 lg:px-0",children:[e.jsx(f,{className:"p-3 sm:p-4 min-w-[140px] sm:min-w-[160px] lg:min-w-0 flex-shrink-0 lg:flex-shrink",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-muted-foreground",children:"Total"}),e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mt-0.5 sm:mt-1",children:N.total})]}),e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(f,{className:"p-3 sm:p-4 min-w-[140px] sm:min-w-[160px] lg:min-w-0 flex-shrink-0 lg:flex-shrink",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-muted-foreground",children:"Admins"}),e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mt-0.5 sm:mt-1",children:N.administradores})]}),e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(f,{className:"p-3 sm:p-4 min-w-[140px] sm:min-w-[160px] lg:min-w-0 flex-shrink-0 lg:flex-shrink",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-muted-foreground",children:"Médicos"}),e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mt-0.5 sm:mt-1",children:N.medicos})]}),e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(f,{className:"p-3 sm:p-4 min-w-[140px] sm:min-w-[160px] lg:min-w-0 flex-shrink-0 lg:flex-shrink",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-muted-foreground",children:"EPS"}),e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mt-0.5 sm:mt-1",children:N.eps})]}),e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(f,{className:"p-3 sm:p-4 min-w-[140px] sm:min-w-[160px] lg:min-w-0 flex-shrink-0 lg:flex-shrink bg-blue-50 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-blue-700 dark:text-blue-400",children:"Activos"}),e.jsx("h3",{className:"text-lg sm:text-2xl font-bold mt-0.5 sm:mt-1 text-blue-700 dark:text-blue-400",children:N.activos})]}),e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-500 opacity-70"})]})})]}),e.jsxs(f,{className:"flex flex-col overflow-hidden",children:[e.jsx(de,{className:"p-3 sm:p-4 md:p-6 pb-2 sm:pb-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(me,{className:"text-base sm:text-lg",children:"Lista de Usuarios"}),e.jsxs(xe,{className:"text-xs sm:text-sm",children:[R.length," usuario",R.length!==1?"s":""]})]}),e.jsxs("div",{className:"relative w-full sm:w-64 md:w-80",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 h-3.5 w-3.5 sm:h-4 sm:w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(n,{placeholder:"Buscar...",value:j,onChange:s=>Ce(s.target.value),className:"pl-9 sm:pl-10 h-9 sm:h-10 text-sm"})]})]})}),e.jsx(he,{className:"p-3 sm:p-4 md:p-6 pt-0 flex-1 overflow-auto",children:e.jsx("div",{className:"-mx-3 sm:-mx-4 md:-mx-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(pe,{className:"min-w-[700px]",children:[e.jsx(ue,{children:e.jsxs(v,{children:[e.jsx(l,{className:"text-xs sm:text-sm",children:"Nombre"}),e.jsx(l,{className:"text-xs sm:text-sm hidden sm:table-cell",children:"Email"}),e.jsx(l,{className:"text-xs sm:text-sm",children:"Rol"}),e.jsx(l,{className:"text-xs sm:text-sm",children:"Estado"}),e.jsx(l,{className:"text-xs sm:text-sm hidden md:table-cell",children:"Registro"}),e.jsx(l,{className:"text-xs sm:text-sm text-right",children:"Acciones"})]})}),e.jsx(je,{children:R.length===0?e.jsx(v,{children:e.jsx(r,{colSpan:6,className:"text-center py-6 sm:py-8 text-xs sm:text-sm text-muted-foreground",children:j?"No se encontraron usuarios.":"No hay usuarios."})}):R.map(s=>e.jsxs(v,{children:[e.jsxs(r,{className:"py-2 sm:py-3",children:[e.jsx("div",{className:"font-medium text-xs sm:text-sm",children:s.name}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground sm:hidden",children:s.email})]}),e.jsx(r,{className:"py-2 sm:py-3 hidden sm:table-cell text-xs sm:text-sm",children:s.email}),e.jsx(r,{className:"py-2 sm:py-3",children:e.jsx(H,{variant:s.role==="administrador"?"default":"secondary",className:"text-[10px] sm:text-xs",children:s.role==="administrador"?"Admin":s.role==="medico"?"Médico":"EPS"})}),e.jsx(r,{className:"py-2 sm:py-3",children:e.jsx(H,{variant:s.is_active?"default":"destructive",className:"text-[10px] sm:text-xs",children:s.is_active?"Activo":"Inactivo"})}),e.jsx(r,{className:"py-2 sm:py-3 hidden md:table-cell text-xs sm:text-sm",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(r,{className:"py-2 sm:py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>Ie(s),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:e.jsx(ns,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>Ue(s),className:`h-7 w-7 sm:h-8 sm:w-8 p-0 ${s.is_active?"text-destructive":"text-success"}`,children:s.is_active?e.jsx(xs,{className:"h-3 w-3 sm:h-4 sm:w-4"}):e.jsx(b,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsxs($e,{children:[e.jsx(Je,{asChild:!0,children:e.jsx(d,{variant:"outline",size:"sm",className:"h-7 w-7 sm:h-8 sm:w-8 p-0 text-destructive",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),e.jsxs(Xe,{className:"max-w-[90vw] sm:max-w-lg",children:[e.jsxs(Ke,{children:[e.jsx(Qe,{className:"text-base sm:text-lg",children:"¿Eliminar usuario?"}),e.jsxs(We,{className:"text-xs sm:text-sm",children:["Se eliminará permanentemente ",e.jsx("strong",{children:s.name}),"."]})]}),e.jsxs(Ye,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(Ze,{className:"w-full sm:w-auto",children:"Cancelar"}),e.jsx(es,{onClick:()=>Le(s),className:"w-full sm:w-auto bg-destructive hover:bg-destructive/90",children:"Eliminar"})]})]})]})]})})]},s.id))})]})})})})]})]})}):e.jsxs(f,{className:"flex flex-col overflow-hidden",children:[e.jsx(de,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(me,{className:"text-lg",children:"Solicitudes de Registro"}),e.jsxs(xe,{children:[F.length," solicitud",F.length!==1?"es":""," ",g?`(${g})`:""]})]}),e.jsxs(y,{value:g||"todas",onValueChange:Be,children:[e.jsx(S,{className:"w-48",children:e.jsx(k,{placeholder:"Filtrar por estado"})}),e.jsxs(E,{children:[e.jsx(c,{value:"todas",children:"Todas"}),e.jsx(c,{value:"pendiente",children:"Pendientes"}),e.jsx(c,{value:"aprobada",children:"Aprobadas"}),e.jsx(c,{value:"rechazada",children:"Rechazadas"})]})]})]})}),e.jsx(he,{className:"pt-0 flex-1 overflow-auto",children:e.jsxs(pe,{children:[e.jsx(ue,{children:e.jsxs(v,{children:[e.jsx(l,{children:"EPS/Nombre"}),e.jsx(l,{children:"NIT"}),e.jsx(l,{children:"Responsable"}),e.jsx(l,{children:"Cargo"}),e.jsx(l,{children:"Teléfono"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Fecha"}),e.jsx(l,{className:"text-right",children:"Acciones"})]})}),e.jsx(je,{children:F.length===0?e.jsx(v,{children:e.jsx(r,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:g?"No se encontraron solicitudes con este estado.":"No hay solicitudes registradas."})}):F.map(s=>e.jsxs(v,{children:[e.jsx(r,{className:"font-medium",children:s.institucion?.nombre||s.ips_nombre||"N/A"}),e.jsx(r,{children:s.nit}),e.jsx(r,{children:s.nombre_responsable}),e.jsx(r,{children:s.cargo_responsable}),e.jsx(r,{children:s.telefono}),e.jsx(r,{children:s.email}),e.jsx(r,{children:e.jsx(H,{variant:s.estado==="aprobada"?"default":s.estado==="rechazada"?"destructive":"secondary",children:s.estado==="pendiente"?"Pendiente":s.estado==="aprobada"?"Aprobada":"Rechazada"})}),e.jsx(r,{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs(r,{className:"text-right",children:[s.estado==="pendiente"&&e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>Me(s),className:"text-green-600 hover:text-green-700",title:"Aprobar solicitud",children:e.jsx(os,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>qe(s),className:"text-red-600 hover:text-red-700",title:"Rechazar solicitud",children:e.jsx(ss,{className:"h-4 w-4"})})]}),s.estado!=="pendiente"&&s.aprobador&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Por ",s.aprobador.name]})]})]},s.id))})]})})]}),e.jsx(G,{open:we,onOpenChange:z,children:e.jsxs(V,{className:"sm:max-w-[500px]",children:[e.jsxs($,{children:[e.jsx(J,{children:"Rechazar Solicitud"}),e.jsx(X,{children:"¿Estás seguro de que deseas rechazar esta solicitud? Puedes agregar observaciones opcionales."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[u&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"EPS:"})," ",u.institucion?.nombre||u.ips_nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Responsable:"})," ",u.nombre_responsable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",u.email]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"observaciones",children:"Observaciones (opcional)"}),e.jsx(ls,{id:"observaciones",value:se,onChange:s=>M(s.target.value),placeholder:"Motivo del rechazo...",rows:4})]})]}),e.jsxs(K,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancelar"}),e.jsx(d,{type:"button",variant:"destructive",onClick:Oe,children:"Rechazar Solicitud"})]})]})}),e.jsx(G,{open:Ne,onOpenChange:T,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsx(J,{children:"Editar Usuario"}),e.jsxs(X,{children:["Modifica la información del usuario ",L?.name,"."]})]}),e.jsxs("form",{onSubmit:Fe,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-name",children:"Nombre Completo"}),e.jsx(n,{id:"edit-name",value:P.name,onChange:s=>C("name",s.target.value),placeholder:"Ej: Dr. Juan Pérez",required:!0}),e.jsx(o,{message:B.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-email",children:"Correo Electrónico"}),e.jsx(n,{id:"edit-email",type:"email",value:P.email,onChange:s=>C("email",s.target.value),placeholder:"correo@ejemplo.com",required:!0}),e.jsx(o,{message:B.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-role",children:"Rol"}),e.jsxs(y,{value:P.role,onValueChange:s=>C("role",s),children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Selecciona un rol"})}),e.jsxs(E,{children:[e.jsx(c,{value:"medico",children:"Médico"}),e.jsx(c,{value:"administrador",children:"Administrador"}),e.jsx(c,{value:"ips",children:"IPS"})]})]}),e.jsx(o,{message:B.role})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{id:"edit-is-active",checked:P.is_active,onCheckedChange:s=>C("is_active",!!s)}),e.jsx(i,{htmlFor:"edit-is-active",children:"Usuario activo"})]})]}),e.jsxs(K,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>T(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",disabled:ne,children:ne?"Guardando...":"Guardar Cambios"})]})]})]})})]})})}export{Ls as default};
