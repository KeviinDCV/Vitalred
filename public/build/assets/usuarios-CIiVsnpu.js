import{c as O,u as te,r as n,v as _,t as T,j as e,B as t,S as ie,A as le,w as ce,x as ne,y as oe,z as de,E as me,G as xe,H as he,I as ue,a as U}from"./app-DqsKdKIZ.js";import{C as o,a as je,b as pe,d as ge,c as ve}from"./card-DNbMW3ua.js";import{T as fe,a as Ne,b as S,c as d,d as be,e as l}from"./table-C0M58Jqo.js";import{B as I}from"./app-header-floating-C3lrnovL.js";import{D as F,a as Ce,b as L,c as P,d as q,e as M,f as H}from"./dialog-CVb8VUWL.js";import{I as c}from"./input-DHBWUCw1.js";import{L as a}from"./label-B2yhok3k.js";import{S as z,a as R,b as G,c as B,d as m}from"./select-lbzcYT14.js";import{C as ye}from"./checkbox-aD5KCfmW.js";import{I as i}from"./input-error-DKG8kE_p.js";import{A as we}from"./app-layout-inertia-W6Uck5dV.js";import{P as De}from"./plus-Bp8R2mKa.js";import{S as Se}from"./square-pen-BqCTuE1k.js";import{T as Ee}from"./trash-2-w5MYXBO1.js";/* empty css            */import"./index-BKv8jPLp.js";import"./index-CoxEX9DM.js";import"./app-logo-icon-DMtEqdir.js";import"./x-BbzKcyQD.js";import"./index-BTgzaAdk.js";import"./check-BE3MNElQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],x=O("UserCheck",ke);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],_e=O("UserX",Ae),Te=[{title:"Dashboard",href:"/dashboard"},{title:"Gestión de Usuarios",href:"/admin/usuarios"}];function Ze({usuarios:C,stats:h}){const{auth:V,flash:u}=te().props,[J,y]=n.useState(!1),[X,N]=n.useState(!1),[w,E]=n.useState(null),[r,$]=n.useState(""),{data:j,setData:p,post:K,processing:k,errors:g,reset:Q}=_({name:"",email:"",password:"",password_confirmation:"",role:"medico",is_active:!0}),{data:b,setData:v,put:W,processing:A,errors:D,reset:Y}=_({name:"",email:"",role:"medico",is_active:!0}),f=n.useMemo(()=>r?C.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.email.toLowerCase().includes(r.toLowerCase())||s.role.toLowerCase().includes(r.toLowerCase())):C,[C,r]);n.useEffect(()=>{u?.success&&T.success(u.success),u?.error&&T.error(u.error)},[u]);const Z=s=>{s.preventDefault(),K(route("admin.usuarios.store"),{onSuccess:()=>{Q(),y(!1)}})},ee=s=>{s.preventDefault(),w&&W(route("admin.usuarios.update",w.id),{onSuccess:()=>{Y(),N(!1),E(null)}})},se=s=>{E(s),v({name:s.name,email:s.email,role:s.role,is_active:s.is_active}),N(!0)},ae=s=>{U.patch(route("admin.usuarios.toggle-status",s.id))},re=s=>{U.delete(route("admin.usuarios.destroy",s.id))};return e.jsx(we,{title:"Gestión de Usuarios - HERMES",breadcrumbs:Te,user:V.user,children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Gestión de Usuarios"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Administra los usuarios del sistema"})]}),e.jsxs(F,{open:J,onOpenChange:y,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(t,{className:"bg-primary hover:bg-primary/90",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(P,{children:[e.jsx(q,{children:"Crear Nuevo Usuario"}),e.jsx(M,{children:"Completa la información para crear un nuevo usuario en el sistema."})]}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"create-name",children:"Nombre Completo"}),e.jsx(c,{id:"create-name",value:j.name,onChange:s=>p("name",s.target.value),placeholder:"Ej: Dr. Juan Pérez",required:!0}),e.jsx(i,{message:g.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"create-email",children:"Correo Electrónico"}),e.jsx(c,{id:"create-email",type:"email",value:j.email,onChange:s=>p("email",s.target.value),placeholder:"correo@ejemplo.com",required:!0}),e.jsx(i,{message:g.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"create-role",children:"Rol"}),e.jsxs(z,{value:j.role,onValueChange:s=>p("role",s),children:[e.jsx(R,{children:e.jsx(G,{placeholder:"Selecciona un rol"})}),e.jsxs(B,{children:[e.jsx(m,{value:"medico",children:"Médico"}),e.jsx(m,{value:"administrador",children:"Administrador"}),e.jsx(m,{value:"ips",children:"IPS"})]})]}),e.jsx(i,{message:g.role})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"create-password",children:"Contraseña"}),e.jsx(c,{id:"create-password",type:"password",value:j.password,onChange:s=>p("password",s.target.value),placeholder:"Mínimo 8 caracteres",required:!0}),e.jsx(i,{message:g.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"create-password-confirmation",children:"Confirmar Contraseña"}),e.jsx(c,{id:"create-password-confirmation",type:"password",value:j.password_confirmation,onChange:s=>p("password_confirmation",s.target.value),placeholder:"Repite la contraseña",required:!0}),e.jsx(i,{message:g.password_confirmation})]})]}),e.jsxs(H,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",disabled:k,children:k?"Creando...":"Crear Usuario"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-[280px_1fr] flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Usuarios"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:h.total})]}),e.jsx(x,{className:"h-8 w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Administradores"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:h.administradores})]}),e.jsx(x,{className:"h-8 w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Médicos"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:h.medicos})]}),e.jsx(x,{className:"h-8 w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"IPS"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:h.ips})]}),e.jsx(x,{className:"h-8 w-8 text-blue-600 dark:text-blue-500 opacity-60"})]})}),e.jsx(o,{className:"p-4 bg-blue-50 dark:bg-blue-950/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-400",children:"Usuarios Activos"}),e.jsx("h3",{className:"text-2xl font-bold mt-1 text-blue-700 dark:text-blue-400",children:h.activos})]}),e.jsx(x,{className:"h-8 w-8 text-blue-600 dark:text-blue-500 opacity-70"})]})})]}),e.jsxs(o,{className:"flex flex-col overflow-hidden",children:[e.jsx(je,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"text-lg",children:"Lista de Usuarios"}),e.jsxs(ge,{children:[f.length," usuario",f.length!==1?"s":""," ",r?"encontrado"+(f.length!==1?"s":""):""]})]}),e.jsxs("div",{className:"relative w-80",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(c,{placeholder:"Buscar por nombre, email o rol...",value:r,onChange:s=>$(s.target.value),className:"pl-10"})]})]})}),e.jsx(ve,{className:"pt-0 flex-1 overflow-auto",children:e.jsxs(fe,{children:[e.jsx(Ne,{children:e.jsxs(S,{children:[e.jsx(d,{children:"Nombre"}),e.jsx(d,{children:"Email"}),e.jsx(d,{children:"Rol"}),e.jsx(d,{children:"Estado"}),e.jsx(d,{children:"Fecha Registro"}),e.jsx(d,{className:"text-right",children:"Acciones"})]})}),e.jsx(be,{children:f.length===0?e.jsx(S,{children:e.jsx(l,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:r?"No se encontraron usuarios que coincidan con la búsqueda.":"No hay usuarios registrados."})}):f.map(s=>e.jsxs(S,{children:[e.jsx(l,{className:"font-medium",children:s.name}),e.jsx(l,{children:s.email}),e.jsx(l,{children:e.jsx(I,{variant:s.role==="administrador"?"default":"secondary",children:s.role==="administrador"?"Administrador":s.role==="medico"?"Médico":"IPS"})}),e.jsx(l,{children:e.jsx(I,{variant:s.is_active?"default":"destructive",children:s.is_active?"Activo":"Inactivo"})}),e.jsx(l,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>se(s),title:"Editar usuario",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>ae(s),className:s.is_active?"text-destructive hover:text-destructive":"text-success hover:text-success",title:s.is_active?"Desactivar usuario":"Activar usuario",children:s.is_active?e.jsx(_e,{className:"h-4 w-4"}):e.jsx(x,{className:"h-4 w-4"})}),e.jsxs(le,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(t,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",title:"Eliminar usuario",children:e.jsx(Ee,{className:"h-4 w-4"})})}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:"¿Eliminar usuario?"}),e.jsxs(me,{children:["Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ",e.jsx("strong",{children:s.name})," y todos sus datos asociados."]})]}),e.jsxs(xe,{children:[e.jsx(he,{children:"Cancelar"}),e.jsx(ue,{onClick:()=>re(s),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]})]})})]},s.id))})]})})]})]}),e.jsx(F,{open:X,onOpenChange:N,children:e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(P,{children:[e.jsx(q,{children:"Editar Usuario"}),e.jsxs(M,{children:["Modifica la información del usuario ",w?.name,"."]})]}),e.jsxs("form",{onSubmit:ee,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"edit-name",children:"Nombre Completo"}),e.jsx(c,{id:"edit-name",value:b.name,onChange:s=>v("name",s.target.value),placeholder:"Ej: Dr. Juan Pérez",required:!0}),e.jsx(i,{message:D.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"edit-email",children:"Correo Electrónico"}),e.jsx(c,{id:"edit-email",type:"email",value:b.email,onChange:s=>v("email",s.target.value),placeholder:"correo@ejemplo.com",required:!0}),e.jsx(i,{message:D.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"edit-role",children:"Rol"}),e.jsxs(z,{value:b.role,onValueChange:s=>v("role",s),children:[e.jsx(R,{children:e.jsx(G,{placeholder:"Selecciona un rol"})}),e.jsxs(B,{children:[e.jsx(m,{value:"medico",children:"Médico"}),e.jsx(m,{value:"administrador",children:"Administrador"}),e.jsx(m,{value:"ips",children:"IPS"})]})]}),e.jsx(i,{message:D.role})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{id:"edit-is-active",checked:b.is_active,onCheckedChange:s=>v("is_active",!!s)}),e.jsx(a,{htmlFor:"edit-is-active",children:"Usuario activo"})]})]}),e.jsxs(H,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",disabled:A,children:A?"Guardando...":"Guardar Cambios"})]})]})]})})]})})}export{Ze as default};
